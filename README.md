# مشروع Hand Effects - الإصدار المصحح

هذا المشروع يعرض كاميرا ويب في صفحة ويب ويطبق تأثيرات مرئية **داخل الشكل الرباعي** الذي يتكون من:
- سبابة اليد اليسرى (index tip)
- إبهام اليد اليسرى (thumb tip)
- إبهام اليد اليمنى (thumb tip)
- سبابة اليد اليمنى (index tip)

### ما الذي تم إصلاحه وتحسينه
1. تصحيح خطأ `TypeError: int() argument must be ... NoneType`:

   السبب: كان الكود يفترض ترتيبًا ثابتًا لليدين (results.multi_hand_landmarks[0], [1]) مما أحيانًا يعيد landmarks غير متوقعة أو غير متسقة.

   الحل: الآن نستخدم mapping بين `results.multi_hand_landmarks` و `results.multi_handedness` (Left/Right) لضمان أننا نأخذ النقاط الصحيحة لكل يد.

2. منع تحطّم الـ stream عند حدوث استثناء في حلقة التوليد: جميع الأخطاء الآن تُلتقط وتُسجل بدون أن تُكسر استجابة الفيديو.

3. استخدام قناع متعدد الأضلاع (polygon) بدل المربع المحاذي للمحاور: يعطي تطبيق التأثير داخل الشكل الفعلي بين الأصابع بدقة.

4. تأثيرات "أقوى" (جوهرية):
   - Invert: عكس الألوان داخل الشكل.
   - Blur: تشويش قوي مع بقية تفاصيل خفيفة.
   - Edges: كشف الحواف مع تكثيفها لتكون واضحة.
   - Sepia: تأثير رجعي مع تقوية التباين.
   - Color Shift: تدرج لوني عرضي يتغير بمرور الوقت.

5. تحسين استجابة الكاشف: ضبط `min_detection_confidence` و `min_tracking_confidence` و `model_complexity` للحصول على تتبُّع أسرع وأكثر ثباتًا.

### تشغيل المشروع
1. إنشاء بيئة افتراضية وتفعيلها.
2. تثبيت المتطلبات: `pip install -r requirements.txt`
3. تشغيل السيرفر: `python app.py`
4. فتح المتصفح: `http://127.0.0.1:5000`

### ملاحظات تقنية
- إذا ظهرت رسائل تحذيرية من MediaPipe فهي غالبًا تحذيرات حول التحويلات الداخلية ويمكن تجاهلها إن لم تؤثر على الأداء.
- عتْبة المساحة (area) قابلة للتعديل داخل `app.py` إذا كانت المنطقة صغيرة جدًا أو كبيرة بالنسبة لكاميرتك.

